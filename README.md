# تعليمات نشر موقع الويب على Render

## الخطوات الأساسية

1. قم بتحميل ملف ZIP إلى حسابك على Render
2. أنشئ خدمة ويب جديدة (Web Service)
3. حدد نوع التطبيق: Python
4. ضبط متغيرات البيئة التالية:
   - `DATABASE_URL`: رابط قاعدة البيانات PostgreSQL
   - `SESSION_SECRET`: مفتاح عشوائي لجلسات المستخدمين
   - `TELEGRAM_BOT_TOKEN`: رمز بوت تيليجرام (اختياري)
   - `TELEGRAM_CHAT_ID`: معرف محادثة تيليجرام (اختياري)
   - `MAIL_SERVER`: خادم البريد الإلكتروني (اختياري)
   - `MAIL_PORT`: منفذ البريد الإلكتروني (اختياري)
   - `MAIL_USERNAME`: اسم مستخدم البريد الإلكتروني (اختياري)
   - `MAIL_PASSWORD`: كلمة مرور البريد الإلكتروني (اختياري)

5. ضبط أمر البناء: `pip install -r requirements.txt`
6. ضبط أمر التشغيل: `gunicorn --bind 0.0.0.0:5000 --reuse-port main:app`

## ما بعد النشر

### إعداد قاعدة البيانات والحساب الإداري

1. بعد نشر التطبيق، قم بفتح صفحة Shell من لوحة تحكم Render وتنفيذ الأوامر التالية:
   ```
   python check_db.py
   python create_admin_for_render.py
   ```
   هذا سيتحقق من إنشاء جميع الجداول المطلوبة وإنشاء حساب مسؤول افتراضي.

2. سجل الدخول إلى لوحة التحكم باستخدام بيانات الاعتماد الافتراضية:
   - اسم المستخدم: `admin`
   - كلمة المرور: `admin123`

3. قم بتغيير كلمة المرور الافتراضية فورًا من خلال صفحة الملف الشخصي.

### إعداد الكاروسيل والصور

هذه الحزمة لا تتضمن ملفات الوسائط. بعد النشر، يجب عليك:

1. إنشاء المجلدات التالية إذا لم تكن موجودة:
   ```
   static/uploads/carousel
   static/uploads/portfolio
   static/uploads/services
   static/uploads/profile
   static/uploads/testimonials
   ```

2. لإصلاح مشكلة الكاروسيل:
   - انتقل إلى لوحة التحكم > إدارة الكاروسيل
   - قم بحذف العناصر الموجودة (لأن صورها غير متوفرة)
   - أضف عناصر جديدة مع صور جديدة
   - تأكد من ضبط الترتيب والحالة (نشط/غير نشط) لكل عنصر

3. إعادة رفع صور المشاريع والخدمات من لوحة التحكم.

## حل المشكلات الشائعة

1. مشكلة عدم القدرة على الوصول إلى لوحة التحكم:
   - تأكد من إنشاء مستخدم مسؤول باستخدام `create_admin_for_render.py`
   - تحقق من وجود جميع الجداول في قاعدة البيانات باستخدام `python check_db.py`

2. مشكلة عدم ظهور صور الكاروسيل:
   - تظهر رسالة "No carousel images found" في وحدة تحكم المتصفح
   - الحل: قم بإعادة إنشاء عناصر الكاروسيل من لوحة التحكم مع رفع الصور الجديدة
   - تأكد من أن قيمة `is_active` مضبوطة على True لجميع العناصر التي تريد عرضها

3. مشكلة خطأ 500 في لوحة التحكم:
   - تحقق من سجلات التطبيق في Render للعثور على المشكلة الدقيقة
   - تأكد من إعداد متغيرات البيئة بشكل صحيح، خاصة DATABASE_URL

## خطوات إضافية للأمان

- قم بتفعيل المصادقة الثنائية من خلال إعدادات الأمان في لوحة التحكم
- تجنب استخدام "admin" كاسم مستخدم في الإنتاج، قم بإنشاء حساب جديد بصلاحيات المسؤول
- قم بتعطيل حساب admin الافتراضي بعد إنشاء الحساب الجديد